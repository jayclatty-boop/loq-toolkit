<wpfui:UiPage
    x:Class="LenovoLegionToolkit.WPF.Pages.SystemInfoPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:resources="clr-namespace:LenovoLegionToolkit.WPF.Resources"
    xmlns:utils="clr-namespace:LenovoLegionToolkit.WPF.Utils"
    xmlns:wpfui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="System Info"
    FlowDirection="{x:Static utils:LocalizationHelper.Direction}"
    Scrollable="True">

    <StackPanel Margin="0,0,16,12">
        <!-- Page Title -->
        <TextBlock
            Margin="0,16,0,24"
            Focusable="True"
            FontSize="24"
            FontWeight="Medium"
            Text="System Info" />

        <!-- LOQ Warning Banner (shown when not a LOQ device) -->
        <Border
            x:Name="_loqWarningBanner"
            Margin="0,0,0,16"
            Padding="12"
            Background="{DynamicResource SystemFillColorCautionBackgroundBrush}"
            CornerRadius="4"
            Visibility="Collapsed">
            <StackPanel Orientation="Horizontal">
                <wpfui:SymbolIcon
                    Margin="0,0,8,0"
                    VerticalAlignment="Center"
                    Foreground="{DynamicResource SystemFillColorCautionBrush}"
                    Symbol="Warning24" />
                <TextBlock
                    VerticalAlignment="Center"
                    Text="This device does not appear to be a Lenovo LOQ laptop. Some features may not work correctly."
                    TextWrapping="Wrap" />
            </StackPanel>
        </Border>

        <!-- Device Information Section -->
        <TextBlock
            Padding="0,0,0,12"
            Focusable="True"
            FontSize="16"
            FontWeight="Medium"
            Text="Device Information" />

        <Border
            Margin="0,0,0,24"
            Padding="16"
            Background="{DynamicResource ControlFillColorDefaultBrush}"
            CornerRadius="8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" MinWidth="150" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <TextBlock
                    Grid.Row="0"
                    Grid.Column="0"
                    Margin="0,0,0,8"
                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                    Text="Model" />
                <TextBlock
                    x:Name="_modelText"
                    Grid.Row="0"
                    Grid.Column="1"
                    Margin="0,0,0,8"
                    FontWeight="Medium"
                    Text="Loading..." />

                <TextBlock
                    Grid.Row="1"
                    Grid.Column="0"
                    Margin="0,0,0,8"
                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                    Text="Machine Type" />
                <TextBlock
                    x:Name="_machineTypeText"
                    Grid.Row="1"
                    Grid.Column="1"
                    Margin="0,0,0,8"
                    FontWeight="Medium"
                    Text="Loading..." />

                <TextBlock
                    Grid.Row="2"
                    Grid.Column="0"
                    Margin="0,0,0,8"
                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                    Text="Serial Number" />
                <TextBlock
                    x:Name="_serialNumberText"
                    Grid.Row="2"
                    Grid.Column="1"
                    Margin="0,0,0,8"
                    FontWeight="Medium"
                    Text="Loading..." />

                <TextBlock
                    Grid.Row="3"
                    Grid.Column="0"
                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                    Text="BIOS Version" />
                <TextBlock
                    x:Name="_biosVersionText"
                    Grid.Row="3"
                    Grid.Column="1"
                    FontWeight="Medium"
                    Text="Loading..." />
            </Grid>
        </Border>

        <!-- GPU Information Section -->
        <TextBlock
            Padding="0,0,0,12"
            Focusable="True"
            FontSize="16"
            FontWeight="Medium"
            Text="GPU Information" />

        <Border
            Margin="0,0,0,8"
            Padding="16"
            Background="{DynamicResource ControlFillColorDefaultBrush}"
            CornerRadius="8">
            <StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" MinWidth="150" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <TextBlock
                        Grid.Column="0"
                        Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                        Text="GPU Model" />
                    <TextBlock
                        x:Name="_gpuNameText"
                        Grid.Column="1"
                        FontWeight="Medium"
                        Text="Loading..." />
                </Grid>
            </StackPanel>
        </Border>

        <!-- GPU Real-time Monitoring Dashboard -->
        <Border
            x:Name="_monitoringCard"
            Margin="0,0,0,24"
            Padding="16"
            Background="{DynamicResource ControlFillColorDefaultBrush}"
            CornerRadius="8"
            Visibility="Collapsed">
            <StackPanel>
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock
                        Grid.Column="0"
                        FontSize="14"
                        FontWeight="Medium"
                        Text="Real-time Monitoring" />
                    <wpfui:Button
                        x:Name="_toggleMonitoringButton"
                        Grid.Column="1"
                        Content="Start Monitoring"
                        Appearance="Secondary"
                        Icon="Play24"
                        Click="ToggleMonitoringButton_Click" />
                </Grid>

                <Grid x:Name="_monitoringGrid">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <!-- Core Clock -->
                    <Border Grid.Row="0" Grid.Column="0" Padding="8" Margin="4">
                        <StackPanel>
                            <TextBlock Foreground="{DynamicResource TextFillColorSecondaryBrush}" FontSize="11" Text="Core Clock" />
                            <TextBlock x:Name="_coreClockText" FontSize="20" FontWeight="Medium" Text="-- MHz" />
                        </StackPanel>
                    </Border>

                    <!-- Memory Clock -->
                    <Border Grid.Row="0" Grid.Column="1" Padding="8" Margin="4">
                        <StackPanel>
                            <TextBlock Foreground="{DynamicResource TextFillColorSecondaryBrush}" FontSize="11" Text="Memory Clock" />
                            <TextBlock x:Name="_memoryClockText" FontSize="20" FontWeight="Medium" Text="-- MHz" />
                        </StackPanel>
                    </Border>

                    <!-- Temperature -->
                    <Border Grid.Row="0" Grid.Column="2" Padding="8" Margin="4">
                        <StackPanel>
                            <TextBlock Foreground="{DynamicResource TextFillColorSecondaryBrush}" FontSize="11" Text="Temperature" />
                            <TextBlock x:Name="_temperatureText" FontSize="20" FontWeight="Medium" Text="-- °C" />
                        </StackPanel>
                    </Border>

                    <!-- GPU Usage -->
                    <Border Grid.Row="1" Grid.Column="0" Padding="8" Margin="4">
                        <StackPanel>
                            <TextBlock Foreground="{DynamicResource TextFillColorSecondaryBrush}" FontSize="11" Text="GPU Usage" />
                            <TextBlock x:Name="_gpuUsageText" FontSize="20" FontWeight="Medium" Text="-- %" />
                        </StackPanel>
                    </Border>

                    <!-- Power Draw -->
                    <Border Grid.Row="1" Grid.Column="1" Padding="8" Margin="4">
                        <StackPanel>
                            <TextBlock Foreground="{DynamicResource TextFillColorSecondaryBrush}" FontSize="11" Text="Power Draw" />
                            <TextBlock x:Name="_powerDrawText" FontSize="20" FontWeight="Medium" Text="-- W" />
                        </StackPanel>
                    </Border>

                    <!-- Performance State -->
                    <Border Grid.Row="1" Grid.Column="2" Padding="8" Margin="4">
                        <StackPanel>
                            <TextBlock Foreground="{DynamicResource TextFillColorSecondaryBrush}" FontSize="11" Text="Perf State" />
                            <TextBlock x:Name="_perfStateText" FontSize="20" FontWeight="Medium" Text="--" />
                        </StackPanel>
                    </Border>

                    <!-- Temperature Warning -->
                    <Border Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3" Padding="8" Margin="4" 
                            x:Name="_tempWarningBorder"
                            Background="{DynamicResource SystemFillColorCautionBackgroundBrush}"
                            CornerRadius="4"
                            Visibility="Collapsed">
                        <StackPanel Orientation="Horizontal">
                            <wpfui:SymbolIcon Symbol="Warning24" Margin="0,0,8,0" 
                                            Foreground="{DynamicResource SystemFillColorCautionBrush}" />
                            <TextBlock x:Name="_tempWarningText" TextWrapping="Wrap" 
                                     Text="Temperature is high! Overclock may be reverted for safety." />
                        </StackPanel>
                    </Border>
                </Grid>
            </StackPanel>
        </Border>

        <!-- GPU Stability Testing Section -->
        <TextBlock
            x:Name="_stabilityTestingHeader"
            Padding="0,0,0,8"
            Focusable="True"
            FontSize="16"
            FontWeight="Medium"
            Text="Stability Testing"
            Visibility="Collapsed" />

        <Border
            x:Name="_stabilityTestingCard"
            Margin="0,0,0,24"
            Padding="16"
            Background="{DynamicResource ControlFillColorDefaultBrush}"
            CornerRadius="8"
            Visibility="Collapsed">
            <StackPanel>
                <TextBlock
                    Margin="0,0,0,12"
                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                    Text="Test the stability of your overclock settings. Quick Test runs for 2 minutes, Extended Test runs for 30 minutes."
                    TextWrapping="Wrap" />

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <wpfui:Button
                        x:Name="_quickTestButton"
                        Grid.Column="0"
                        Margin="0,0,8,0"
                        Content="Quick Test (2 min)"
                        Icon="Flash24"
                        HorizontalAlignment="Stretch"
                        Click="QuickTestButton_Click" />

                    <wpfui:Button
                        x:Name="_extendedTestButton"
                        Grid.Column="1"
                        Margin="8,0,0,0"
                        Content="Extended Test (30 min)"
                        Icon="Timer24"
                        Appearance="Secondary"
                        HorizontalAlignment="Stretch"
                        Click="ExtendedTestButton_Click" />
                </Grid>

                <!-- Test Progress -->
                <Border
                    x:Name="_testProgressCard"
                    Margin="0,16,0,0"
                    Padding="12"
                    Background="{DynamicResource ControlFillColorSecondaryBrush}"
                    CornerRadius="4"
                    Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock x:Name="_testStatusText" FontWeight="Medium" Margin="0,0,0,8" Text="Running stability test..." />
                        <ProgressBar x:Name="_testProgressBar" Height="6" Margin="0,0,0,8" />
                        <TextBlock x:Name="_testTimeText" FontSize="11" Foreground="{DynamicResource TextFillColorSecondaryBrush}" Text="Time remaining: --:--" />
                        <wpfui:Button
                            x:Name="_cancelTestButton"
                            Margin="0,12,0,0"
                            Content="Cancel Test"
                            Appearance="Danger"
                            Icon="Dismiss24"
                            Click="CancelTestButton_Click" />
                    </StackPanel>
                </Border>

                <!-- Temperature Safety Settings -->
                <Border
                    Margin="0,16,0,0"
                    Padding="12"
                    Background="{DynamicResource ControlFillColorDefaultBrush}"
                    CornerRadius="4">
                    <StackPanel>
                        <TextBlock FontWeight="Medium" Margin="0,0,0,8" Text="Safety Settings" />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <TextBlock
                                Grid.Column="0"
                                VerticalAlignment="Center"
                                Margin="0,0,12,0"
                                Text="Temperature Limit:" />
                            <Slider
                                x:Name="_tempLimitSlider"
                                Grid.Column="1"
                                Minimum="75"
                                Maximum="95"
                                Value="85"
                                TickFrequency="5"
                                IsSnapToTickEnabled="True"
                                Margin="0,0,12,0"
                                ValueChanged="TempLimitSlider_ValueChanged" />
                            <TextBlock
                                x:Name="_tempLimitText"
                                Grid.Column="2"
                                VerticalAlignment="Center"
                                FontWeight="Medium"
                                Text="85 °C" />
                        </Grid>
                        <TextBlock
                            Margin="0,8,0,0"
                            FontSize="11"
                            Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                            Text="Overclock will be automatically reverted if temperature exceeds this limit."
                            TextWrapping="Wrap" />
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>

        <!-- GPU Overclock Recommendations Section -->
        <TextBlock
            Padding="0,0,0,8"
            Focusable="True"
            FontSize="16"
            FontWeight="Medium"
            Text="Recommended GPU Overclocks" />
        <TextBlock
            Margin="0,0,0,16"
            Foreground="{DynamicResource TextFillColorSecondaryBrush}"
            Text="Select a preset based on your preference. Conservative is safer, Aggressive offers more performance but may cause instability."
            TextWrapping="Wrap" />

        <!-- GPU OC Not Supported Warning -->
        <Border
            x:Name="_gpuNotSupportedBanner"
            Margin="0,0,0,16"
            Padding="12"
            Background="{DynamicResource ControlFillColorDefaultBrush}"
            CornerRadius="4"
            Visibility="Collapsed">
            <StackPanel Orientation="Horizontal">
                <wpfui:SymbolIcon
                    Margin="0,0,8,0"
                    VerticalAlignment="Center"
                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                    Symbol="Info24" />
                <TextBlock
                    VerticalAlignment="Center"
                    Text="GPU overclocking is not supported on this device."
                    TextWrapping="Wrap" />
            </StackPanel>
        </Border>

        <!-- Preset Cards Container -->
        <ItemsControl x:Name="_presetsContainer" Margin="0,0,0,24">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid Columns="3" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>

    </StackPanel>
</wpfui:UiPage>
